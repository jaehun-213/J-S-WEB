<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="(ì£¼)ì œì´ì•¤ì—ìŠ¤ê±´ì„¤ ê²¬ì  í˜„í™©">
    <title>ê²¬ì  í˜„í™© | (ì£¼)ì œì´ì•¤ì—ìŠ¤ê±´ì„¤</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@400&family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="icon" href="/J-S-WEB/images/favicon.ico">
    <!-- Firebase SDK (Storage ì œê±° - ì´ í˜ì´ì§€ì—ì„œëŠ” ë¶ˆí•„ìš”) -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <!-- Storage SDK ì œê±°: quote-list.htmlì—ì„œëŠ” íŒŒì¼ ì—…ë¡œë“œê°€ ì—†ìœ¼ë¯€ë¡œ ë¶ˆí•„ìš”í•œ ë¯¸êµ­ ì„œë²„ ì—°ê²° ë°©ì§€ -->
    <script src="/J-S-WEB/js/firebase-config.example.js"></script>
</head>
<body>
    <!-- í—¤ë” -->
    <header class="header">
        <div class="header-container">
            <a href="index.html" class="logo">
                <div class="logo-icon">
                    <img src="images/ì œì´ì—”ì—ìŠ¤ë¡œê³ .jpg" alt="(ì£¼)ì œì´ì•¤ì—ìŠ¤ê±´ì„¤ ë¡œê³ ">
                </div>
                <span>(ì£¼)ì œì´ì•¤ì—ìŠ¤ê±´ì„¤</span>
            </a>
            <nav class="nav-menu">
                <a href="index.html" class="nav-item">ë©”ì¸</a>
                <a href="about.html" class="nav-item">íšŒì‚¬ì†Œê°œ</a>
                <a href="business.html" class="nav-item">ì‚¬ì—…ì˜ì—­</a>
                <a href="portfolio.html" class="nav-item">ì‹œê³µì‹¤ì </a>
                <a href="support.html" class="nav-item">ê³ ê°ì§€ì›</a>
                <a href="quote-list.html" class="nav-item active">ê²¬ì  í˜„í™©</a>
                <div id="auth-buttons" style="display: flex; align-items: center; gap: 0.5rem; margin-left: 1rem;">
                    <!-- ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë¨ -->
                </div>
            </nav>
            <button class="mobile-menu-btn">â˜°</button>
        </div>
    </header>

    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <main class="main-content">
        <section style="background: linear-gradient(135deg, #6a1a2b 0%, #8b2d42 100%); padding: 80px 20px; text-align: center; color: white;">
            <div class="container">
                <h1 style="font-size: 3rem; font-weight: bold; margin-bottom: 1rem;">ê²¬ì  í˜„í™©</h1>
                <p style="font-size: 1.25rem;">ì ‘ìˆ˜ëœ ê²¬ì  ìš”ì²­ ëª©ë¡</p>
            </div>
        </section>

        <section class="section">
            <div class="container">
                <!-- ê´€ë¦¬ì ì¸ì¦ ìƒíƒœ í‘œì‹œ -->
                <div id="admin-status" style="margin-bottom: 1.5rem; padding: 1rem; background: var(--gray-100); border-radius: 8px; display: none;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong style="color: var(--primary-blue);">ê´€ë¦¬ì ëª¨ë“œ</strong>
                            <span id="admin-email" style="color: var(--gray-600); font-size: 0.875rem; margin-left: 0.5rem;"></span>
                        </div>
                        <button id="logout-btn" class="btn btn-outline" style="padding: 0.5rem 1rem; font-size: 0.875rem;">ë¡œê·¸ì•„ì›ƒ</button>
                    </div>
                </div>
                
                <div id="quote-list-container">
                    <div style="text-align: center; padding: 3rem;">
                        <div class="spinner" style="display: inline-block; width: 40px; height: 40px; border: 4px solid #f3f3f3; border-top: 4px solid #6a1a2b; border-radius: 50%; animation: spin 1s linear infinite;"></div>
                        <p style="margin-top: 1rem; color: var(--gray-600);">ê²¬ì  ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- í’‹í„° -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>(ì£¼)ì œì´ì•¤ì—ìŠ¤ê±´ì„¤</h3>
                    <p>ì •ë°€í•œ ê¸°ìˆ ê³¼ ì‹ ë¢°ì˜ ì‹œê³µìœ¼ë¡œ<br>ê³ ê°ê³¼ í•¨ê»˜ ì„±ì¥í•©ë‹ˆë‹¤.</p>
                </div>
                <div class="footer-section">
                    <h3>íšŒì‚¬ ì •ë³´</h3>
                    <p>ëŒ€í‘œì: ê¹€ì†Œì—°</p>
                    <p><strong>ë³¸ì‚¬:</strong> ì¸ì²œê´‘ì—­ì‹œ ë¶€í‰êµ¬ ê²½ì¸ë¡œ 1107 2ì¸µ (ì¼ì‹ ë™)</p>
                    <p><strong>ì§€ì‚¬:</strong> ê²½ê¸°ë„ ê¹€í¬ì‹œ ì–‘ì´Œì ì„ëª¨ë¡œ 44ë²ˆê¸¸ 90</p>
                </div>
                <div class="footer-section">
                    <h3>ì—°ë½ì²˜</h3>
                    <p>ì „í™”: <a href="tel:031-986-1190">031-986-1190</a></p>
                    <p>íŒ©ìŠ¤: 031-986-1191</p>
                    <p>ì´ë©”ì¼: <a href="mailto:jandscons@naver.com">jandscons@naver.com</a></p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>Copyright Â© 2025 J&S. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="/J-S-WEB/js/script.js"></script>
    <script>
        // ì¸ì¦ ìƒíƒœ ê´€ë¦¬ ë° UI ì—…ë°ì´íŠ¸
        function updateAuthUI(user) {
            const authButtons = document.getElementById('auth-buttons');
            const adminStatus = document.getElementById('admin-status');
            const adminEmail = document.getElementById('admin-email');
            const logoutBtn = document.getElementById('logout-btn');
            
            if (user) {
                // ë¡œê·¸ì¸ ìƒíƒœ - ê´€ë¦¬ì ëª¨ë“œ
                console.log('ê´€ë¦¬ì ë¡œê·¸ì¸ ìƒíƒœ:', user.email);
                adminStatus.style.display = 'block';
                adminEmail.textContent = user.email;
                
                // ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ ì´ë²¤íŠ¸
                if (logoutBtn) {
                    logoutBtn.onclick = async function() {
                        if (confirm('ë¡œê·¸ì•„ì›ƒí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                            try {
                                await auth.signOut();
                                console.log('ë¡œê·¸ì•„ì›ƒ ì™„ë£Œ');
                                alert('ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤.');
                                location.reload();
                            } catch (error) {
                                console.error('ë¡œê·¸ì•„ì›ƒ ì˜¤ë¥˜:', error);
                                alert('ë¡œê·¸ì•„ì›ƒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                            }
                        }
                    };
                }
                
                // í—¤ë”ì˜ ë¡œê·¸ì¸ ë²„íŠ¼ ìˆ¨ê¹€ (ê´€ë¦¬ì ëª¨ë“œì¼ ë•ŒëŠ” ë¡œê·¸ì¸ ë²„íŠ¼ ë¶ˆí•„ìš”)
                if (authButtons) {
                    authButtons.innerHTML = '';
                    authButtons.style.display = 'none';
                }
            } else {
                // ë¡œê·¸ì•„ì›ƒ ìƒíƒœ - ì¼ë°˜ ì‚¬ìš©ì ëª¨ë“œ
                console.log('ë¡œê·¸ì•„ì›ƒ ìƒíƒœ (ì¼ë°˜ ì‚¬ìš©ì ëª¨ë“œ)');
                adminStatus.style.display = 'none';
                
                // í—¤ë”ì˜ ë¡œê·¸ì¸ ë²„íŠ¼ë„ ìˆ¨ê¹€ (ì¼ë°˜ ì‚¬ìš©ìëŠ” ë¡œê·¸ì¸ ë²„íŠ¼ì´ í•„ìš” ì—†ìŒ)
                if (authButtons) {
                    authButtons.innerHTML = '';
                    authButtons.style.display = 'none';
                }
            }
        }
        
        // ì¸ì¦ ìƒíƒœ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
        if (typeof auth !== 'undefined') {
            auth.onAuthStateChanged((user) => {
                updateAuthUI(user);
            });
        } else {
            // Auth SDKê°€ ë¡œë“œë  ë•Œê¹Œì§€ ëŒ€ê¸°
            function waitForAuth() {
                if (typeof auth !== 'undefined') {
                    auth.onAuthStateChanged((user) => {
                        updateAuthUI(user);
                    });
                } else {
                    setTimeout(waitForAuth, 100);
                }
            }
            waitForAuth();
        }
        
        // ì„±ëŠ¥ ìµœì í™”: í˜ì´ì§€ ë¡œë“œ ì‹œ ì¦‰ì‹œ ë°ì´í„° ìš”ì²­ ì‹œì‘ (ì¸ì¦ ë¡œì§ ëŒ€ê¸° ì—†ìŒ)
        // DOMContentLoadedë¥¼ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³  ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì§í›„ ì‹¤í–‰
        (function() {
            // Firestore ì´ˆê¸°í™” ëŒ€ê¸° (ë¹„ë™ê¸°)
            function waitForFirestore() {
                if (typeof firebase !== 'undefined' && typeof db !== 'undefined') {
                    loadQuoteList();
                    // ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì • (ì„ íƒì‚¬í•­)
                    setupRealtimeListener();
                } else if (typeof firebase !== 'undefined' && firebase.firestore) {
                    // firebase-config.jsê°€ ì•„ì§ ì‹¤í–‰ ì¤‘ì¼ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì•½ê°„ì˜ ì§€ì—° í›„ ì¬ì‹œë„
                    setTimeout(waitForFirestore, 50);
                } else {
                    // Firebase SDKê°€ ì•„ì§ ë¡œë“œë˜ì§€ ì•ŠìŒ
                    setTimeout(waitForFirestore, 100);
                }
            }
            
            // DOM ì¤€ë¹„ ì—¬ë¶€ì™€ ê´€ê³„ì—†ì´ ì¦‰ì‹œ Firestore í™•ì¸ ì‹œì‘
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', waitForFirestore);
            } else {
                waitForFirestore();
            }
        })();

        // ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ë¦¬ìŠ¤ë„ˆ (ìƒˆë¡œìš´ ê²¬ì ì´ ì¶”ê°€ë˜ë©´ ìë™ìœ¼ë¡œ ëª©ë¡ ê°±ì‹ )
        let isFirstSnapshot = true; // ì²« ë²ˆì§¸ ìŠ¤ëƒ…ìƒ·ì¸ì§€ ì¶”ì 
        
        function setupRealtimeListener() {
            if (typeof db === 'undefined') {
                console.warn('Firestoreê°€ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•„ ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆë¥¼ ì„¤ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }

            try {
                console.log('ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì • ì¤‘...');
                
                // ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆ ì„¤ì • (ìƒˆ ë¬¸ì„œ ì¶”ê°€ ì‹œ ìë™ ê°±ì‹ )
                db.collection('quoteRequests_public')
                    .orderBy('createdAt', 'desc')
                    .onSnapshot((snapshot) => {
                        // ì²« ë²ˆì§¸ ìŠ¤ëƒ…ìƒ·ì€ ì´ˆê¸° ë¡œë“œì´ë¯€ë¡œ ë¬´ì‹œ (ì´ë¯¸ loadQuoteList()ì—ì„œ ì²˜ë¦¬ë¨)
                        if (isFirstSnapshot) {
                            isFirstSnapshot = false;
                            console.log('ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆ ì´ˆê¸°í™” ì™„ë£Œ. ë³€ê²½ì‚¬í•­ ê°ì§€ ëŒ€ê¸° ì¤‘...');
                            return;
                        }
                        
                        // ì‹¤ì œ ë³€ê²½ì‚¬í•­ í™•ì¸
                        const changes = snapshot.docChanges();
                        const hasNewDocs = changes.some(change => change.type === 'added');
                        
                        console.log('ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ê°ì§€:', {
                            'ë³€ê²½ëœ ë¬¸ì„œ ìˆ˜': changes.length,
                            'ìƒˆë¡œ ì¶”ê°€ëœ ë¬¸ì„œ': changes.filter(c => c.type === 'added').length,
                            'ì „ì²´ ë¬¸ì„œ ìˆ˜': snapshot.size
                        });
                        
                        // ìƒˆ ë¬¸ì„œê°€ ì¶”ê°€ëœ ê²½ìš°ì—ë§Œ ëª©ë¡ ê°±ì‹ 
                        if (hasNewDocs) {
                            console.log('ìƒˆë¡œìš´ ê²¬ì ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤. ëª©ë¡ì„ ê°±ì‹ í•©ë‹ˆë‹¤.');
                            loadQuoteList();
                        }
                    }, (error) => {
                        console.error('ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆ ì˜¤ë¥˜:', error);
                        // ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆ ì‹¤íŒ¨ ì‹œì—ë„ ì •ìƒ ì‘ë™í•˜ë„ë¡ ê³„ì† ì§„í–‰
                        if (error.code === 'failed-precondition') {
                            console.warn('ì¸ë±ìŠ¤ê°€ ì—†ì–´ ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ìˆ˜ë™ ìƒˆë¡œê³ ì¹¨ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                        }
                    });
                    
                console.log('âœ… ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì • ì™„ë£Œ');
            } catch (error) {
                console.error('ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆ ì„¤ì • ì‹¤íŒ¨:', error);
                // ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆ ì‹¤íŒ¨í•´ë„ ì •ìƒ ì‘ë™í•˜ë„ë¡ ê³„ì† ì§„í–‰
            }
        }

        async function loadQuoteList() {
            const container = document.getElementById('quote-list-container');
            const startTime = performance.now(); // ì„±ëŠ¥ ì¸¡ì •
            
            // Firebase ì´ˆê¸°í™” í™•ì¸
            if (typeof firebase === 'undefined') {
                container.innerHTML = `
                    <div class="card" style="text-align: center; padding: 3rem;">
                        <p style="color: #EF4444;">Firebaseê°€ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.</p>
                        <p style="color: var(--gray-600); margin-top: 0.5rem; font-size: 0.875rem;">firebase-config.js íŒŒì¼ì„ í™•ì¸í•˜ì„¸ìš”.</p>
                    </div>
                `;
                return;
            }
            
            if (typeof db === 'undefined') {
                container.innerHTML = `
                    <div class="card" style="text-align: center; padding: 3rem;">
                        <p style="color: #EF4444;">Firestoreê°€ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.</p>
                        <p style="color: var(--gray-600); margin-top: 0.5rem; font-size: 0.875rem;">firebase-config.js íŒŒì¼ì„ í™•ì¸í•˜ì„¸ìš”.</p>
                    </div>
                `;
                return;
            }
            
            try {
                console.log('ê²¬ì  ëª©ë¡ ë¡œë“œ ì‹œì‘...', new Date().toISOString());
                
                // ì¸ë±ìŠ¤ ì˜¤ë¥˜ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ë¨¼ì € orderBy ì—†ì´ ì‹œë„í•˜ê³ , ì‹¤íŒ¨í•˜ë©´ ì „ì²´ ì¡°íšŒ í›„ ì •ë ¬
                let snapshot;
                try {
                    snapshot = await db.collection('quoteRequests_public')
                        .orderBy('createdAt', 'desc')
                        .get();
                } catch (indexError) {
                    if (indexError.code === 'failed-precondition') {
                        console.warn('ì¸ë±ìŠ¤ê°€ ì—†ì–´ ì „ì²´ ì¡°íšŒ í›„ ì •ë ¬í•©ë‹ˆë‹¤.');
                        // ì¸ë±ìŠ¤ ì—†ì´ ì „ì²´ ì¡°íšŒ
                        const allDocs = await db.collection('quoteRequests_public').get();
                        // í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì •ë ¬
                        const sortedDocs = [];
                        allDocs.forEach(doc => {
                            sortedDocs.push({ id: doc.id, data: doc.data() });
                        });
                        sortedDocs.sort((a, b) => {
                            const dateA = a.data.createdAt ? a.data.createdAt.toMillis() : 0;
                            const dateB = b.data.createdAt ? b.data.createdAt.toMillis() : 0;
                            return dateB - dateA; // ë‚´ë¦¼ì°¨ìˆœ
                        });
                        
                        // snapshotê³¼ ìœ ì‚¬í•œ í˜•íƒœë¡œ ë³€í™˜
                        snapshot = {
                            empty: sortedDocs.length === 0,
                            size: sortedDocs.length,
                            forEach: (callback) => {
                                sortedDocs.forEach(item => {
                                    callback({
                                        id: item.id,
                                        data: () => item.data
                                    });
                                });
                            }
                        };
                    } else {
                        throw indexError;
                    }
                }
                
                const loadTime = performance.now() - startTime;
                console.log(`ê²¬ì  ëª©ë¡ ì¡°íšŒ ì™„ë£Œ: ${snapshot.size}ê°œ (${loadTime.toFixed(2)}ms)`);
                
                // ì¡°íšŒëœ ë¬¸ì„œ ìƒì„¸ ë¡œê·¸
                if (snapshot.size > 0) {
                    console.log('ì¡°íšŒëœ ê²¬ì  ëª©ë¡:');
                    snapshot.forEach((doc, index) => {
                        const data = typeof doc.data === 'function' ? doc.data() : doc.data;
                        console.log(`${index + 1}. ID: ${doc.id}, ì œëª©: ${data.title}, ë‚ ì§œ: ${data.createdAt ? (data.createdAt.toDate ? data.createdAt.toDate() : data.createdAt) : 'ì—†ìŒ'}`);
                    });
                }

                if (snapshot.empty) {
                    container.innerHTML = `
                        <div class="card" style="text-align: center; padding: 3rem;">
                            <p style="color: var(--gray-600); font-size: 1.125rem;">ì•„ì§ ì ‘ìˆ˜ëœ ê²¬ì  ìš”ì²­ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                            <a href="support.html#estimate-form" class="btn btn-primary" style="margin-top: 1rem;">ê²¬ì  ìš”ì²­í•˜ê¸°</a>
                        </div>
                    `;
                    return;
                }

                let html = '<div class="card"><div class="card-body"><table style="width: 100%; border-collapse: collapse;">';
                html += '<thead><tr style="border-bottom: 2px solid var(--gray-200);">';
                html += '<th style="padding: 1rem; text-align: left; color: var(--gray-800);">ì œëª©</th>';
                html += '<th style="padding: 1rem; text-align: right; color: var(--gray-800);">ì ‘ìˆ˜ì¼</th>';
                html += '</tr></thead><tbody>';

                snapshot.forEach(doc => {
                    const data = typeof doc.data === 'function' ? doc.data() : doc.data;
                    const docId = doc.id;
                    
                    // ë””ë²„ê¹… ë¡œê·¸
                    console.log('ëª©ë¡ í•­ëª©:', {
                        id: docId,
                        title: data.title,
                        idType: typeof docId,
                        idLength: docId ? docId.length : 0
                    });
                    
                    let date = 'ë‚ ì§œ ì—†ìŒ';
                    
                    if (data.createdAt) {
                        if (data.createdAt.toDate) {
                            date = data.createdAt.toDate().toLocaleDateString('ko-KR');
                        } else if (data.createdAt.toMillis) {
                            date = new Date(data.createdAt.toMillis()).toLocaleDateString('ko-KR');
                        } else if (data.createdAt instanceof Date) {
                            date = data.createdAt.toLocaleDateString('ko-KR');
                        }
                    }
                    
                    // URL ì¸ì½”ë”©í•˜ì—¬ íŠ¹ìˆ˜ë¬¸ì ë¬¸ì œ ë°©ì§€
                    const encodedDocId = encodeURIComponent(docId);
                    html += `<tr style="border-bottom: 1px solid var(--gray-200); cursor: pointer;" onclick="window.location.href='quote-detail.html?id=${encodedDocId}'">`;
                    html += `<td style="padding: 1rem;">${data.title || 'ì œëª© ì—†ìŒ'}</td>`;
                    html += `<td style="padding: 1rem; text-align: right; color: var(--gray-600);">${date}</td>`;
                    html += '</tr>';
                });

                html += '</tbody></table></div></div>';
                container.innerHTML = html;

            } catch (error) {
                console.error('ê²¬ì  ëª©ë¡ ë¡œë“œ ì˜¤ë¥˜:', error);
                console.error('ì˜¤ë¥˜ ì½”ë“œ:', error.code);
                console.error('ì˜¤ë¥˜ ë©”ì‹œì§€:', error.message);
                
                let errorMsg = error.message || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜';
                let errorDetail = '';
                
                if (error.code === 'permission-denied') {
                    errorDetail = 'Firestore ë³´ì•ˆ ê·œì¹™ì—ì„œ ì½ê¸° ê¶Œí•œì´ ê±°ë¶€ë˜ì—ˆìŠµë‹ˆë‹¤.';
                } else if (error.code === 'failed-precondition') {
                    errorDetail = 'ì¸ë±ìŠ¤ê°€ í•„ìš”í•©ë‹ˆë‹¤. Firebase ì½˜ì†”ì—ì„œ ì œê³µëœ ë§í¬ë¥¼ í´ë¦­í•˜ì—¬ ì¸ë±ìŠ¤ë¥¼ ìƒì„±í•˜ì„¸ìš”.';
                } else if (error.code === 'unavailable') {
                    errorDetail = 'Firebase ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì¸í„°ë„· ì—°ê²°ì„ í™•ì¸í•˜ì„¸ìš”.';
                }
                
                container.innerHTML = `
                    <div class="card" style="text-align: center; padding: 3rem;">
                        <p style="color: #EF4444; font-size: 1.125rem; margin-bottom: 1rem;">ê²¬ì  ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>
                        <p style="color: var(--gray-800); margin-bottom: 0.5rem;"><strong>ì˜¤ë¥˜ ì½”ë“œ:</strong> ${error.code || 'ì•Œ ìˆ˜ ì—†ìŒ'}</p>
                        <p style="color: var(--gray-700); margin-bottom: 1rem;"><strong>ì˜¤ë¥˜ ë©”ì‹œì§€:</strong> ${errorMsg}</p>
                        ${errorDetail ? `<p style="color: var(--primary-blue); margin-bottom: 1rem;">ğŸ’¡ ${errorDetail}</p>` : ''}
                        <a href="firebase-debug.html" class="btn btn-primary" style="margin-top: 1rem;">Firebase ì—°ê²° í…ŒìŠ¤íŠ¸</a>
                    </div>
                `;
            }
        }
    </script>
    <style>
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        table tbody tr:hover {
            background-color: var(--gray-100);
        }
        @media (max-width: 768px) {
            table {
                font-size: 0.875rem;
            }
            table th, table td {
                padding: 0.75rem 0.5rem !important;
            }
        }
    </style>
</body>
</html>

